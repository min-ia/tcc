\chapter{Metodologia}
\label{sec:Metodologia}

Com o propósito de atingir o objetivo descrito na \autoref{sec:ObjetivoGeral}, o presente trabalho
realizou uma pesquisa exploratória acerca do tema abordado juntamente com a análise de alguns casos
práticos de empresas que fizeram a migração de uma arquitetura monolítica para uma arquitetura de
microsserviços, ou vice e versa. Assim, o desenvolvimento deste estudo baseou-se nas seguintes etapas:

\begin{description}
    \item [Etapa 1] Levantamento teórico inicial acerca dos objetos de análise diante dos
        referências teóricos adotados;
    \item [Etapa 2] Fichamento e agrupamento dos pontos de vista descobertos na Etapa 1, a fim de
        encontrar as perspectivas comuns e divergentes entre os autores estudados;
    \item [Etapa 3] Síntese acerca dos aspectos levantados sobre cada estilo arquitetural;
    \item [Etapa 4] Descrição e análise dos casos de estudo relevantes para o tema;
    \item [Etapa 5] Análise final comparando os dois modelos arquiteturais com base nos referencias
        teóricos adotados e nos casos práticos estudados.
\end{description}

A seguir serão apresentados os objetos de análise, as ferramentas utilizadas e a descrição de cada
etapa adotada. Vale ressaltar que deste ponto em diante alguns termos, como perspectivas ou
impactos, estarão destacados na presente seção com o intuito de chamar a devida atenção para o seu
significado, mas a frente será dada a definição tomada para cada um deles.

\section{Objetos de análise}
\label{sec:ObjetosDeAnalise}

Os objetos de análise pertinentes para o presente estudo consistem em:

    \begin{description}
        \item [Arquitetura monolítica:] estilo arquitetural tradicionalmente adotado em diversas
            empresas, no qual se detém uma base única de código.
        \item [Arquitetura de microsserviços:] estilo arquitetural distribuído, largamente adotado
            nos últimos anos por diversas empresas.
    \end{description}

\section{Ferramentas}

As ferramentas utilizadas para auxiliar na confecção do presente estudo foram:

\begin{description}
    \item[Miro] editor gráfico \textit{online} que permite a construção de diagramas, mapa mentais, entre
        outros recursos gráficos relevantes ao conteúdo apresentado\footnote{Vide \url{https://miro.com}};
    \item[Google Planilhas] ferramenta para construção de tabelas\footnote{Vide \url{https://workspace.google.com/google/sheets}}.
    \item[Trello] quadro interativo que auxilia na organização de projetos utilizando do modelo
        Kanban\footnote{Vide \url{http://trello.com}}.
\end{description}

\section{Descrição das etapas}
\subsection{Etapa 1 - Levantamento teórico}

A fundamentação teórica deste trabalho visou explorar os temas de arquitetura de software,
estilo arquitetural monolítico e estilo arquitetural de microsserviços. Os tópicos abordados foram
selecionados com base na sua respectiva relevância dentro do assunto estudado e tiveram embasamento
principalmente os autores listados abaixo que compõem o quadro de nomes com as principais referências
dentro da área de software a respeito dos assuntos relacionados a arquitetura de software na
atualidade.

\begin{description}
    \item[Martin Fowler:] cientista chefe, palestrante, consultor de software e um
        renomado autor dentro da área de software tendo publicado sete livros, como \textit{Patterns of Enterprise
        Application Architecture}, e participado da construção do Manifesto Ágil. Fowler conta com
        décadas de conhecimento acumulado auxiliando empresas a construírem sistemas de software
        eficientes com foco principalmente no design desses sistemas. Dentro do tema do presente
        trabalho, este é um autor que estuda e discute bastante sobre a arquitetura de
        microsserviços e a arquitetura monolítica, sendo referenciado diversas vezes por outros
        autores a respeito deste assunto.\footnote{Vide \url{https://www.thoughtworks.com/profiles/martin-fowler}}
    \item[Sam Newman:] consultor e palestrante com uma vasta experiência auxiliando
        empresas de software ao redor do mundo a construírem seus sistemas de software. Possui uma
        série de artigos e livros publicados pela O’Reilly, incluindo \textit{Monolith To
        Microservices} e \textit{Building Microservices} que estão diretamente relacionados ao tema
        do presente estudo.\footnote{Vide \url{https://samnewman.io/about/} e
        \url{https://www.thoughtworks.com/profiles/sam-newman}}
    \item[Mark Richards:] arquiteto de software, palestrante e autor de diversas
        publicações realizadas pela O’Reilly, incluindo o livro \textit{Fundamentals of Software
        Architecture} em parceria com Neal Ford.
        Possui trinta anos de experiência dentro do mercado de
        software, dentre esses anos, vinte foram dedicados ao papel de arquiteto de software
        abordando principalmente durante sua carreira projetos relacionados a arquitetura de
        microsserviços e \gls{SOA} que estão intrinsecamente relacionadas ao escopo do presente
        estudo.\footnote{Vide \url{https://www.thoughtworks.com/profiles/mark-richards} e
        \url{https://www.oreilly.com/pub/au/3609}}
    \item[Neal Ford:] arquiteto de software, consultor e palestrante com uma série de
        publicações dentro da área de tecnologia, como os livros \textit{ Fundamentals of Software
        Architecture} e \textit{Building Evolutionary Architectures}. Este autor tem foco
        principalmente no design dos sistemas de software e na construção de sistema para empresas
        de larga escala.\footnote{Vide \url{https://www.thoughtworks.com/profiles/neal-ford}}
\end{description}

\subsection{Etapa 2 - Perspectivas e aspectos}
\label{met:perspectivas}

Mediante a fundamentação teórica construída na Etapa 1, levantou-se os principais pontos acerca dos
estilos arquiteturais abordados que eram tratados pelos autores estudados, para tal utilizou-se da
ferramenta Trello com o intuito de organizar os referencias teóricos e destacar o ponto de vista de
cada autor organizando as referências em \textit{cards}. A partir daí, utilizou-se \textit{post-its}
para agrupar pontos de vista em comum entre os autores e classificar quais eram os \textbf{aspectos}
positivos e negativos de cada arquitetura.

Diante dos agrupamentos formados, levantou-se a definição de \textbf{perspectivas} para o presente
estudo, as quais referem-se a formas diferentes de olhar para a arquitetura. Assim, elencou-se as
seguintes perspectivas:

\begin{description}
    \item[Problemática a ser resolvida:] fatores que influenciam o sistema sob a perspectiva do
        problema e do contexto no qual a aplicação está sendo construída;
    \item[Recursos necessários:] fatores que influenciam o sistema sob a perspectiva de quais
        recursos: financeiro, humano e tempo, são necessários para o desenvolvimento de uma
        aplicação nos modelos arquiteturais analisados;
    \item[Características arquiteturais:] fatores que influenciam o sistema sob a perspectiva de
        capacidade da arquitetura de prover algum aspecto que possa ser relevante para a empresa,
        como escalabilidade;
    \item[Manutenibilidade:] fatores que influenciam o sistema sob a perspectiva cotidiana de
        manutenção de cada modelo arquitetural, como processos rotineiros de \textit{deploy} e
        integração contínua e comunicação das equipes;
    \item[Evolucionabilidade:] fatores que influenciam o sistema sob a perspectiva de tomada de
        decisão dentro de cada modelo arquitetural.
\end{description}

Dentro de cada perspectiva foram listados \textbf{aspectos} levantados pelos autores. Esses aspectos
são responsáveis por gerar ou sofrer algum \textbf{impacto} dentro do estilo arquitetural, a exemplo:
sob o aspecto financeiro a arquitetura monolítica gera o impacto de ser de baixo custo.

Nota-se que a fundamentação teórica foi apresentada sob a organização dessas perspectivas e aspectos
com o intuito de facilitar a compreensão do presente estudo.

\subsection{Etapa 3 - Síntese}
\label{met:sintese}

Neste ponto, as perspectivas teóricas sobre a arquitetura estavam definidas e iniciou-se uma nova
etapa de sintetizar as informações discutidas na fundamentação teórica com o intuito de padronizar e
classificar os aspectos levantados. O \autoref{quad:sintese-definicoes} visa apresentar as
definições tomadas nessa etapa do trabalho com o intuito de realizar a classificação dos aspectos
elencados.

\begin{quadro}
    \caption{Definições adotadas\label{quad:sintese-definicoes}}
    \begin{tabularx}{\linewidth}{ | p{5cm} | X | }
    \hline
    \textbf{Estilo arquitetural} & Estilo arquitetural em análise. \\ \hline
    \textbf{Perspectiva}         & Ponto de vista sob o qual a arquitetura está sendo analisada. \\ \hline
    \textbf{Aspecto}             & Fator que impacta ou é impactado pela arquitetura dentro daquela perspectiva. \\ \hline
    \textbf{Impacto}             & Efeito gerado mediante determinado aspecto. \\ \hline
    \textbf{Causa}               & característica presente na natureza daquela arquitetura que é responsável por gerar o dado impacto. \\ \hline
    \textbf{Fatores adversos}    & Fatores que podem mudar a polaridade do impacto \\ \hline
    \textbf{Constância}          & Tendência do impacto a aumentar ou diminuir a medida que a base de código cresce. \\ \hline
    \textbf{Embasamento}         & Seção de referência na fundamentação teórica. \\ \hline
    \end{tabularx}
\end{quadro}

Mediante tais definições, construiu-se o \autoref{modelo-sintese} como o modelo adotado na
sintetização do referencial teórico. Na \autoref{sinteses} este modelo é aplicado, fazendo a
análise sobre o referencial teórico, e ao todo foram levantados 14 aspectos que de alguma forma
impactam ou são impactados pelo estilo arquitetural. Vale ressaltar que nem todos os aspectos
possuem todos os pontos elencados no \autoref{modelo-sintese}.

\begin{quadro}
    \caption{Quadro modelo aplicado na síntese dos aspectos arquiteturais elencados\label{modelo-sintese}}
    \begin{tabularx}{\linewidth}{ | p{5cm} | X | }
    \hline
    \textbf{A escolha de um}        &  estilo arquitetural \\ \hline
    \textbf{sob a perspectiva}      &  analisada \\ \hline
    \textbf{mediante o aspecto}     &  levantado no referencial teórico \\ \hline
    \textbf{gera um impacto}        &  positivo ou negativo sob a arquitetura \\ \hline
    \textbf{devido à }              &  uma característica do estilo arquitetural que predispõem aquele impacto \\ \hline
    \textbf{contudo}                &  é preciso lidar com alguns fatores adversos \\ \hline
    \textbf{consciente de que este aspecto tende a } & decair ou a aumentar mediante o fator adverso mencionado \\ \hline
    \textbf{com base na}            &  seção de referência na fundamentação teórica \\ \hline
    \end{tabularx}
\end{quadro}

Ao final, o resultado dessa análise é resumido em um mapa mental, semelhante a
\autoref{fig:ModeloMapaMental}, com o intuito de facilitar a compreensão sobre os aspectos
analisados. Assim, mediante a análise desses aspectos sintetizados, foi possível classifica-los em:

\begin{figure}[h]
  \centering
  \includegraphics[keepaspectratio=true,scale=0.6]{figuras/modelo-mapa-mental.eps}
  \caption{Modelo de mapa mental utilizado para ilustrar o resultado das sínteses\label{fig:ModeloMapaMental}}
\end{figure}

\begin{description}
    \item[Fatores positivos:] fatores que beneficiam o sistema diante um dado contexto;
    \item[Fatores negativos:] fatores que o modelo arquitetural não provê ou possui alguma limitação;
    \item[Fatores positivos que precisam de atenção:] fatores que são positivos no modelo
        arquitetural mas que precisam de cuidados adicionais para não se tornarem um problema
    \item[Fatores positivos que tendem a se tornar negativos:] fatores que são positivos no modelo
        arquitetural mas que tendem a se tornar um problema a medida que a base de código cresce.
\end{description}

\subsection{Etapa 4 - Estudos de caso}

Com o propósito de enriquecer o presente trabalho e avaliar os aspectos levantados nas etapas
anteriores sob uma concepção prática, nesta etapa visou-se analisar casos reais de empresas que
passaram pelo conflito de escolha arquitetural entre microsserviços e monolíticos.

Existem várias discussões e estudos a respeito de casos práticos sobre ambos os estilos
arquiteturais analisados. Sendo o objetivo do presente trabalho comparar esses estilos, optou-se por
abordar situações em que empresas optaram por migrar seus sistemas especificadamente entre os
estilos arquiteturais analisados, visando entender dentro do contexto das empresas quais as
motivações que levaram para essa decisão.

Seguindo esta visão, os casos de estudo foram escolhidos com base no critério de que as empresas deveriam
ter optado por realizar uma migração saindo da arquitetura monolítica para a arquitetura de microsserviços
ou, a situação inversa, saindo da arquitetura de microsserviços para a arquitetura monolítica. Para
completar, objetivou-se obter diferentes pontos de vista a respeito de cada modelo arquitetural,
assim observou-se também a variação de sucesso e fracasso dos modelos arquiteturais dentro do
conjunto de casos selecionados, dessa forma os seguintes casos foram adotados para estudo:

\begin{description}
    \item[KN Login:] um sistema monolítico inflado de funcionalidades, no qual a equipe se encontra
        impossibilitada de migrar para uma arquitetura de microsserviços mediante a complexidade
        para fazê-lo;
    \item[Otto:] um sistema monolítico legado que passa pela migração para a arquitetura de
        microsserviços;
    \item[Segment:] um sistema monolítico relativamente novo, que passa pela migração para a
        arquitetura de microsserviços e depois passa por uma nova migração para a arquitetura
        monolítica novamente.
    \item[RuaDois:] uma \textit{startup} que começou a sua arquitetura em microsserviços e depois
        optou por mudar para uma arquitetura monolítica.
\end{description}

Diante deste conjunto de casos selecionados foi possível obter a relação apresentada no
\autoref{quad:VariacaoCasosDeEstudo}, pela qual conseguimos atingir diferentes pontos de vistas sobre
cada modelo arquitetural e avaliar quais aspectos contribuem para o sucesso ou fracasso do modelo
arquitetural mediante uma perspectiva prática.

\begin{quadro}
    \caption{Pontos de vistas apresentados pelos casos de estudos sobre cada modelo
    arquitetural\label{quad:VariacaoCasosDeEstudo}}
    \begin{tabularx}{\linewidth}{ | X | p{6cm} | }
    \hline
        \textbf{Contexto analisado} & \textbf{Caso de estudo que evidencia esse contexto}\\ \hline
    Contexto de sucesso sobre o modelo arquitetural monolítico & Segment e RuaDois\\ \hline
    Contexto de sucesso sobre o modelo arquitetural de microsserviços & Otto \\ \hline
    Contexto de fracasso sobre o modelo arquitetural monolítico & KN Login e Otto \\ \hline
    Contexto de fracasso sobre o modelo arquitetural de microsserviços & Segment e RuaDois \\ \hline
    \end{tabularx}
\end{quadro}

Por fim, cada caso foi avaliando diante dos seguintes tópicos, visando explorar o contexto de cada
empresa e os fatores que influenciaram os modelos arquiteturais:

\begin{enumerate}
    \item \textbf{Problemática da aplicação:} compreensão dos problemas e dificuldades enfrentados
        pela empresa na arquitetura inicialmente escolhida;
    \item \textbf{Solução adotada:} compreensão sobre as decisões tomadas pela empresa mediante os
        problemas enfrentados;
    \item \textbf{Panorama pós-adoção da solução:} compreensão sobre como a solução escolhida
        impactou o desenvolvimento de software dentro da empresa;
    \item \textbf{Análise sobre o caso de estudo:} análise sobre o caso estudado mediante as
        perspectivas e aspectos levantados nas etapas anteriores.
\end{enumerate}

Vale ressaltar que o caso de estudo específico da RuaDois é uma caso no qual a autora deste trabalho
teve participação dentro da equipe de desenvolvimento da empresa, o que permitiu aprofundar um pouco
mais na análise realizada sobre o caso.

\subsection{Etapa 5 - Análise comparativa final}

Por fim, mediante a base de informações reunidas sobre ambos os estilos arquiteturais nas etapas
anteriores, fez-se uma análise final comparando as duas arquiteturas, passando por suas
características mais básicas até a sua evolução no dia a dia dos engenheiros de software.
